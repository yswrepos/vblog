import{_ as n,r as t,o,c as p,a as e,b as a,d as s,e as l}from"./app-CinGCuEv.js";const c={},i=l(`<h2 id="导读" tabindex="-1"><a class="header-anchor" href="#导读"><span>导读</span></a></h2><blockquote><p>本文主要记录一下 Headers 中 Referer 和 Referrer-Policy 等相关字段介绍</p></blockquote><h2 id="referer" tabindex="-1"><a class="header-anchor" href="#referer"><span>Referer</span></a></h2><blockquote><p>Referer 字段标记了访问来源，广泛应用于分析、日志、优化缓存等作用。 Referer 字段是 Referrer 单词的错误拼写，由于历史原因沿用至今。 当点击一个链接的时候，<code>Referer</code>包含了拥有这个链接的页面地址，而在对其它域名发起资源请求时，则包含了请求页面的地址。</p></blockquote><h3 id="构成" tabindex="-1"><a class="header-anchor" href="#构成"><span>构成</span></a></h3><p><code>Referer</code>由 <code>origin, path, querystring</code>字段构成，<code>fragment</code>(e.g. &quot;#section&quot;) 或者 <code>username:password</code> 信息将不会包含在其中。</p><h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h3><blockquote><p>Referer: <code>&lt;url&gt;</code></p></blockquote><h3 id="例子" tabindex="-1"><a class="header-anchor" href="#例子"><span>例子</span></a></h3><p>&quot;https://username:password@example.com/foo/bar/&quot;将不会包含在Referer中 诸如一下的例子会包含在 Referer 中</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token literal-property property">Referer</span><span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>developer<span class="token punctuation">.</span>mozilla<span class="token punctuation">.</span>org<span class="token operator">/</span>en<span class="token operator">-</span><span class="token constant">US</span><span class="token operator">/</span>docs<span class="token operator">/</span>Web<span class="token operator">/</span>JavaScript
<span class="token literal-property property">Referer</span><span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>page<span class="token operator">?</span>q<span class="token operator">=</span><span class="token number">123</span>
<span class="token literal-property property">Referer</span><span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">example.com</span><span class="token regex-delimiter">/</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>注意：Referer 可能包含以上域名的全部或部分，这取决于 <a href="#Referrer-Policy">Referrer Policy</a></p></blockquote><h2 id="referrer-policy" tabindex="-1"><a class="header-anchor" href="#referrer-policy"><span>Referrer-Policy</span></a></h2><p>Referrer-Policy 字段主要控制将要展示哪些 Referer 信息</p><p>有一下几个选项：</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> no<span class="token operator">-</span>referrer
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> no<span class="token operator">-</span>referrer<span class="token operator">-</span>when<span class="token operator">-</span>downgrade
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> origin
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> origin<span class="token operator">-</span>when<span class="token operator">-</span>cross<span class="token operator">-</span>origin
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> same<span class="token operator">-</span>origin
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> strict<span class="token operator">-</span>origin
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> strict<span class="token operator">-</span>origin<span class="token operator">-</span>when<span class="token operator">-</span>cross<span class="token operator">-</span>origin
Referrer<span class="token operator">-</span>Policy<span class="token operator">:</span> unsafe<span class="token operator">-</span>url
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>no-referrer</strong> 省略 Referer 字段，发送请求将不会包含任何头字段</li><li><strong>no-referrer-when-downgrade</strong> 这个选项的主要意思是当从 https 访问到 http 中时不展示 referer 信息</li><li><strong>origin</strong> 只展示 Origin</li><li><strong>origin-when-cross-origin</strong> 表示同源且相同级别协议（https =&gt; https, http =&gt; http）下，展示 Referer 所有信息，但在跨域和降级（https =&gt; http）访问时只展示 origin 信息。</li><li><strong>same-origin</strong> 仅在同源下展示 referer 信息</li><li><strong>strict-origin</strong> 仅在安全(https)协议下展示 referer 信息</li><li><strong>strict-origin-when-cross-origin (默认)</strong> 同源请求展示全部 referer 信息, 跨域请求且安全协议下（https =&gt; https）仅展示 origin</li><li><strong>unsafe-url</strong> 任何情况下都展示完整 referer</li></ul><h3 id="在-html-里设置-referer-policy-信息" tabindex="-1"><a class="header-anchor" href="#在-html-里设置-referer-policy-信息"><span>在 HTML 里设置 referer Policy 信息</span></a></h3><p>也可以在 HTML 中设置 referer 策略信息，如</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>referrer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>origin<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在 <code>&lt;a&gt;, &lt;area&gt;, &lt;img&gt;, &lt;iframe&gt;, &lt;script&gt;, &lt;link&gt;</code> 标签中可以使用<code>referrerpolicy</code>选项设置 referer policy 信息：</p><div class="language-html line-numbers-mode" data-ext="html" data-title="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>origin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或者在一个 a, area, 或 link 元素中设置 <code>rel</code> 为 noreferer</p><blockquote><p>注意：上面的 noreferrer 链接关系是不带破折号的。当您使用 <code>&lt;meta&gt;</code> 元素为整个文档指定引用策略时，应使用短划线编写：<code>&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;</code>。</p></blockquote><h3 id="与-css-集成" tabindex="-1"><a class="header-anchor" href="#与-css-集成"><span>与 CSS 集成</span></a></h3><p>CSS 可以从样式表中获取引用的资源。这些资源也遵循推荐人政策：</p><ul><li>外部 CSS 样式表使用默认策略 (strict-origin-when-cross-origin)，除非它被 CSS 样式表响应中的 Referrer-Policy HTTP 标头覆盖。</li><li>对于 <code>&lt;style&gt;</code> 元素或样式属性，使用所有者文档的引用策略。</li></ul><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2>`,28),d={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy#integration_with_html",target:"_blank",rel:"noopener noreferrer"},u={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.ruanyifeng.com/blog/2016/09/csp.html",target:"_blank",rel:"noopener noreferrer"};function f(g,k){const r=t("ExternalLinkIcon");return o(),p("div",null,[i,e("blockquote",null,[e("p",null,[e("a",d,[a("Referrer-Policy"),s(r)]),e("a",u,[a("Referer"),s(r)]),e("a",h,[a("Content Security Policy 入门教程"),s(r)])])])])}const v=n(c,[["render",f],["__file","HTTP Headers之Referer.html.vue"]]),y=JSON.parse('{"path":"/posts/theory/HTTP%20Headers%E4%B9%8BReferer.html","title":"HTTP Headers之Referer","lang":"zh-CN","frontmatter":{"title":"HTTP Headers之Referer","toc":true,"keywords":"referer,referrer-policy,headers,meta","tags":["headers"],"categories":["前端基础"],"abbrlink":"30eac58d","date":"2021-01-17T13:01:21.000Z","description":"导读 本文主要记录一下 Headers 中 Referer 和 Referrer-Policy 等相关字段介绍 Referer Referer 字段标记了访问来源，广泛应用于分析、日志、优化缓存等作用。 Referer 字段是 Referrer 单词的错误拼写，由于历史原因沿用至今。 当点击一个链接的时候，Referer包含了拥有这个链接的页面地址，而...","head":[["meta",{"property":"og:url","content":"https://b.yongzhenxin.com/posts/theory/HTTP%20Headers%E4%B9%8BReferer.html"}],["meta",{"property":"og:site_name","content":"Yunshenw"}],["meta",{"property":"og:title","content":"HTTP Headers之Referer"}],["meta",{"property":"og:description","content":"导读 本文主要记录一下 Headers 中 Referer 和 Referrer-Policy 等相关字段介绍 Referer Referer 字段标记了访问来源，广泛应用于分析、日志、优化缓存等作用。 Referer 字段是 Referrer 单词的错误拼写，由于历史原因沿用至今。 当点击一个链接的时候，Referer包含了拥有这个链接的页面地址，而..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-04T17:19:22.000Z"}],["meta",{"property":"article:tag","content":"headers"}],["meta",{"property":"article:published_time","content":"2021-01-17T13:01:21.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-04T17:19:22.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"HTTP Headers之Referer\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-01-17T13:01:21.000Z\\",\\"dateModified\\":\\"2024-04-04T17:19:22.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"导读","slug":"导读","link":"#导读","children":[]},{"level":2,"title":"Referer","slug":"referer","link":"#referer","children":[{"level":3,"title":"构成","slug":"构成","link":"#构成","children":[]},{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"例子","slug":"例子","link":"#例子","children":[]}]},{"level":2,"title":"Referrer-Policy","slug":"referrer-policy","link":"#referrer-policy","children":[{"level":3,"title":"在 HTML 里设置 referer Policy 信息","slug":"在-html-里设置-referer-policy-信息","link":"#在-html-里设置-referer-policy-信息","children":[]},{"level":3,"title":"与 CSS 集成","slug":"与-css-集成","link":"#与-css-集成","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"updatedTime":1712251162000,"contributors":[{"name":"yushen","email":"85443289+yushenw@users.noreply.github.com","commits":1}]},"autoDesc":true,"filePathRelative":"posts/theory/HTTP Headers之Referer.md","excerpt":"<h2>导读</h2>\\n<blockquote>\\n<p>本文主要记录一下 Headers 中 Referer 和 Referrer-Policy 等相关字段介绍</p>\\n</blockquote>\\n"}');export{v as comp,y as data};
